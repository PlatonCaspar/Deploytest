{%- extends "base.html" %}
{%- import 'bootstrap/wtf.html' as wtf %}

{% block title %}
    {{ 'Page of: ' + project.project_name }}
{% endblock %}

{% block content %}
    <div class="container container-fluid">
        <div class="panel-default panel-collapse">
            <div class="panel-heading">
                <form class=""
                      action="{{ url_for('delete_project', project_name=project.project_name) }}"
                      method="post">
                    <h1>{{ project.project_name }}
                        <small>
                            {% if current_user.is_authenticated %}
                            <button class="btn btn-group btn-warning btn-sm pull-right" type="button"
                                    data-toggle="collapse" data-target="#delete_project"
                                    aria-expanded="false"
                                    aria-controls="delete_project"><span
                                    class="glyphicon glyphicon-remove"></span></button>
                            {% endif %}
                        </small>
                    </h1>


                    <div class="collapse" id="delete_project">
                        <div class="">
                            <br><br>
                            <button class="btn btn-danger btn-sm btn-block"
                                    type="submit"><span
                                    class="glyphicon glyphicon-ok pull-left"></span>
                                <strong>Delete?</strong>
                            </button>
                        </div>
                    </div>

                </form>
            </div>
            <div class="panel-body" style="border-bottom: solid #e7e7e7 1px">
                <div class="row">
                    <div class="col-xs-3 col-md-3">
                        <div class="thumbnail">
                            {% if project.project_default_image_path is none %}
                            <img src="/static/staticPictures/logo.jpg"
                                 alt="Project Picture"
                                 style="width: 100%">
                            {% else %}
                            <img src="{{ project.project_default_image_path|replace('\\','/') }}"
                                 alt="Project Picture"
                                 style="width: 100%">
                            {% endif %}
                            {% if current_user.is_authenticated %}
                            <div class="caption">
                                <p>
                                <div class="row">
                                    <div class="col-xs-6 col-md-6">
                                        <button class="btn btn-default btn-block" type="button" data-toggle="collapse"
                                                data-target="#delete_project_picture">
                                            <span class="glyphicon glyphicon-remove"></span>
                                        </button>
                                    </div>
                                    <form action="{{ url_for('edit_project_image',project_name=project.project_name) }}"
                                          method="post" class="" enctype="multipart/form-data"
                                          id="new_upfile_form">

                                        <input class="hidden" name="new_upfile" id="new_upfile" accept="image/*"
                                               type="file" value="upload"
                                               onchange="document.getElementById('new_upfile_button').click()">
                                        <button class="hidden" type="submit" id="new_upfile_button"></button>
                                        <div class="col-xs-6 col-md-6">
                                            <button class="btn btn-default btn-block" type="button"
                                                    onclick="document.getElementById('new_upfile').click()"><span
                                                    class="glyphicon glyphicon-edit"></span></button>
                                        </div>
                                    </form>
                                </div>
                                </p>
                            </div>
                            {% endif %}
                            {% set img_id=project.project_default_image_path|replace('/','_') %}

                            <form action="{{ url_for('delete_project_image', project_name=project.project_name) }}"
                                  method="post">

                                <div class="collapse" id="delete_project_picture">
                                    <div class="">
                                        <br><br>
                                        <button class="btn btn-danger"
                                                type="submit"><span
                                                class="glyphicon glyphicon-ok pull-left"></span>
                                            <strong>Delete?</strong>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <h4>Description:</h4>
                <hr>
                {{ project.project_description|safe }}
            </div>
            <div class="panel-footer">

            </div>
            <div class="panel-body">
                <div class="panel-default panel-collapse">
                    <div class="panel-heading">
                        <h3>Boards:</h3>
                    </div>

                    <table class="table table-striped table-hover table-responsive table-condensed">
                        <thead>
                        <tr>
                            <th class="text-info">Code</th>
                            <th class="text-info">Version</th>
                            <th class="text-info">Added on</th>
                            <th class="text-info">Added by</th>
                        </tr>
                        </thead>

                        <tbody>
                        {% set args=boards %}
                        {% for row in args %}
                            <form action="{{ row.link }}">


                                <tr>
                                    <div class="btn-group btn-group-justified">


                                        <td class="text-justify">
                                            <button type="submit" class="btn btn-block"
                                                    style="background-color: transparent">{{ row.code }}</button>
                                        </td>
                                        <td class="text-justify">
                                            <button type="submit" class="btn btn-block"
                                                    style="background-color: transparent">{{ row.project_name }}</button>
                                        </td>
                                        <td class="text-justify">
                                            <button type="submit" class="btn btn-block"
                                                    style="background-color: transparent">{{ row.version }}</button>
                                        </td>
                                        <td class="text-justify">
                                            <button type="submit" class="btn btn-block"
                                                    style="background-color: transparent">{{ row.dateAdded }}</button>
                                        </td>
                                        <td class="text-justify">
                                            <button type="submit" class="btn btn-block btn-text-left"
                                                    style="background-color: transparent"><span
                                                    class="glyphicon glyphicon-user"
                                                    style="padding-right: 5px"></span>{{ row.addedBy.username }}
                                            </button>
                                        </td>

                                    </div>
                                </tr>

                            </form>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

{% endblock %}
